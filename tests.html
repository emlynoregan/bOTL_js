<html>
<head>
<script type="text/javascript" src="bOTL.js"></script>
<script type="text/javascript" src="tests.js"></script>
<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script> -->
</head>
<body>
<script type="text/javascript" src="testsData.js"></script>
<script>
  var addText = function(aText)
  {
      var newtext = document.createTextNode(aText);
      var newdiv = document.createElement('div');
      newdiv.appendChild(newtext);
      document.body.appendChild(newdiv);
  }

  var addTextRed = function(aText)
  {
      var newtext = document.createTextNode(aText + " ***********************************");
      var newdiv = document.createElement('div');
      newdiv.appendChild(newtext);
      document.body.appendChild(newdiv);
  }

  var addTest = function(aResults)
  {
      addText("Name: " + aResults[0])
      aResults[5] ? addText("Passed: " + aResults[5]) : addTextRed("Passed: " + aResults[5])
      addText("Source: " + JSON.stringify(aResults[1]).slice(0, 20))
      addText("Transform: " + JSON.stringify(aResults[2], null, 4))
      addText("Expected: " + JSON.stringify(aResults[3], null, 4))
      addText("Actual: " + JSON.stringify(aResults[4], null, 4))
      addText("-----");
  }

  var lresults = runtests(testsJson)

  lcountFails = 0
  for (lresult of lresults)
  {
    lcountFails += lresult[5] ? 0 : 1 
  }

  if (lcountFails)
    addText("Fails: " + lcountFails)
  else 
    addText("Success")
  addText("===================")

  for (lresult of lresults)
  {
    addTest(lresult)
  }
</script>
</body>